<!DOCTYPE html>
<html lang="da">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Food 8</title>
	<link rel="stylesheet" href="stylesheet.css">
</head>
<header id="header" data-header>

</header>

<body>
	<section id="forsideModtager">
		<div id="forsideTop">
			<h2 id="forsidetekst" class="top">Shops</h2>
		</div>
		<div id="forsideNed">
			<h2 id="forsidetekst" class="ned">Restauranter</h2>
		</div>
		<div id="forsideInspiration">
			<h2 id="forsidetekst" class="tilSide">Inspiration</h2>
		</div>
	</section>



	<div id="map" class="mapModtager"></div>
	<!--google maps-->

	<p class="filtrer">Filtrer</p>
	<section id="filtrering" data-filtrering>

		<button id="filter_XXX" class="filter_btn" data-XXX>XXX</button>
		<button id="filter_XXX" class="filter_btn" data-XXX>XXX</button>
		<button id="filter_XXX" class="filter_btn" data-XXX>XXX</button>
		<button id="filter_XXX" class="filter_btn" data-XXX>XXX</button>
	</section>

	<footer id="footer" class="footer_grid" data-footer></footer>
	<script src="../javascript/footer.js"></script>
	<script src="../javascript/header.js"></script>
	<!--	<script src="javascript/forside.js"></script>-->
	<script>
		let adresser = [];
		let markers = [];
		let adresse;
		let mapModtager = document.querySelector(".mapModtager");



		function findAdresser(geocoder, resultsMap) {
			markers.forEach(marker => {
				console.log(marker.acf.adresse);

				//bed geocode objektet om at sætte en marker udfra adressen
				geocoder.geocode({
					'address': adresser
				}, function(results, status) {
					if (status === 'OK') {
						//resultsMap.setCenter(results[0].geometry.location);
						var marker = new google.maps.Marker({
							map: resultsMap,
							position: results[0].geometry.location
						});
					} else {
						alert('Geocode was not successful for the following reason: ' + status);
					}
				});
			});
		}

		function initMap() {
			//koordinater for kortets centrum
			let copenhagen = {
				lat: 55.676097,
				lng: 12.568337
			};
			//function til at oprette et kort
			let map = new google.maps.Map(document.querySelector('#map'), {
				//zoom level
				zoom: 10,
				center: copenhagen
			});

			//opret geocoder objekt
			var geocoder = new google.maps.Geocoder();
			//kald funktion
			findAdresser(geocoder, map);
			hentJson();

			async function hentJson() {
				let jsonObjekt = await fetch("http://josefinerasch.dk/kea/07-cms/food8/wordpress/wp-json/wp/v2/restauranter");
				//vis objekt som Json
				markers = await jsonObjekt.json();

				findAdresser();

			}
		}

		//		//opret geocoder objekt // function geocodeAddress(geocoder, resultsMap) { // //definer adress // // var address = "Højdevej 25B, Copenhagen, DK"; // //bed geocode objektet om at sætte en marker udfra adressen // geocoder.geocode({ // 'address': adresse // }, function(results, status) { // if (status === 'OK') { // //resultsMap.setCenter(results[0].geometry.location); // var marker = new google.maps.Marker({ // map: resultsMap, // position: results[0].geometry.location // }); // } else { // alert('Geocode was not successful for the following reason: ' + status); // } // }); // }

		//		document.addEventListener("DOMContentLoaded", hentJson);

	</script>
	<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB74lk0tOvCkjLOCp9oiN_pH_FyMTHqYUE&callback=initMap">


	</script>
</body>

</html>
